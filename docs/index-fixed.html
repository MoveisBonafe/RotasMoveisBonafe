<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otimizador de Rotas Móveis Bonafé - GitHub Pages</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="modern-ui.css">
    <style>
        /* Estilos para o sistema de abas */
        .tab-system {
            width: 100%;
            margin-top: 20px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 1px solid #ddd;
            background-color: #f8f9fa;
        }
        
        .tab-button {
            padding: 12px 15px;
            background: none;
            border: none;
            color: #555;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .tab-button.active {
            background-color: white;
            color: #ff6f00;
            border-bottom: 3px solid #ff6f00;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Barra lateral -->
            <div class="col-md-3" style="background-color: #f8f9fa; padding: 20px; height: 100vh; overflow-y: auto;">
                <div class="text-center mb-4">
                    <h3 class="font-weight-bold" style="color: #333;">Otimizador de Rotas</h3>
                    <p class="text-muted">Móveis Bonafé</p>
                </div>
                
                <!-- Filtro de data -->
                <div class="card mb-4" style="border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <div class="card-body">
                        <h5 class="card-title mb-3" style="color: #333; font-weight: 600; font-size: 1rem;">
                            <i class="fas fa-filter" style="color: #ff9800;"></i> Filtrar eventos por data:
                        </h5>
                        <div class="date-range d-flex justify-content-between">
                            <div>
                                <label class="date-range-label">Início:</label>
                                <input type="date" class="form-control" id="start-date" style="border-radius: 8px;">
                            </div>
                            <div>
                                <label class="date-range-label">Fim:</label>
                                <input type="date" class="form-control" id="end-date" style="border-radius: 8px;">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Origem -->
                <div class="card mb-4" style="border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <div class="card-body">
                        <h5 class="card-title mb-3" style="color: #333; font-weight: 600; font-size: 1rem;">
                            <i class="fas fa-map-marker-alt" style="color: #ff5722;"></i> Origem:
                        </h5>
                        <div class="origin-input">
                            <input type="text" class="form-control" id="origin-input" 
                                   placeholder="Cidade de origem" value="Dois Córregos, SP"
                                   style="border-radius: 8px; margin-bottom: 10px;">
                        </div>
                    </div>
                </div>
                
                <!-- Adicionar local -->
                <div class="card mb-4" style="border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <div class="card-body">
                        <h5 class="card-title mb-3" style="color: #333; font-weight: 600; font-size: 1rem;">
                            <i class="fas fa-plus-circle" style="color: #4caf50;"></i> Adicionar local:
                        </h5>
                        <div class="location-input">
                            <input type="text" class="form-control" id="location-input" 
                                   placeholder="Digite um endereço"
                                   style="border-radius: 8px; margin-bottom: 10px;">
                            <button id="add-location-btn" class="btn btn-primary w-100" 
                                    style="background: linear-gradient(135deg, #4caf50, #2e7d32); 
                                         border: none; border-radius: 8px; 
                                         transition: all 0.3s ease;">
                                Adicionar
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Importar CEPs -->
                <div class="card mb-4" style="border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px dashed #ffc107;">
                    <div class="card-body text-center">
                        <div class="upload-icon mb-2" style="font-size: 2rem; color: #ffc107;">
                            <i class="fas fa-file-upload"></i>
                        </div>
                        <h5 class="card-title" style="color: #333; font-weight: 600; font-size: 1rem;">
                            Importar CEPs via arquivo
                        </h5>
                        <p class="text-muted small mb-2">Arraste arquivo ou clique aqui</p>
                        <input type="file" id="cep-file-input" style="display: none;">
                        <button id="cep-upload-btn" class="btn btn-warning btn-sm w-100" 
                                style="background: linear-gradient(135deg, #ffc107, #ff9800); 
                                       border: none; border-radius: 8px; 
                                       transition: all 0.3s ease;">
                            Selecionar Arquivo
                        </button>
                    </div>
                </div>
                
                <!-- Locais adicionados -->
                <div class="card mb-4" style="border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="card-title m-0" style="color: #333; font-weight: 600; font-size: 1rem;">
                                <i class="fas fa-map-pin" style="color: #2196f3;"></i> Locais adicionados:
                            </h5>
                            <span class="badge badge-primary" style="background-color: #2196f3; border-radius: 12px; padding: 5px 10px;">0</span>
                        </div>
                        <div class="locations-list" id="locations-list" style="max-height: 200px; overflow-y: auto;">
                            <!-- Os locais serão adicionados aqui dinamicamente -->
                            <p class="text-muted text-center">Nenhum local adicionado.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Botão Otimizar -->
                <button id="optimize-btn" class="btn btn-lg btn-block mb-4" 
                        style="background: linear-gradient(135deg, #ff9800, #ff5722); 
                              color: white; 
                              font-weight: 700; 
                              border: none; 
                              border-radius: 10px;
                              padding: 12px;
                              box-shadow: 0 4px 10px rgba(255, 111, 0, 0.3);
                              transition: all 0.3s ease;">
                    <i class="fas fa-route mr-2"></i> OTIMIZAR ROTA
                </button>
            </div>
            
            <!-- Conteúdo principal - Mapa -->
            <div class="col-md-9 p-0" style="height: 100vh;">
                <div id="map" style="height: 100%;"></div>
            </div>
        </div>
    </div>
    
    <!-- Sistema de abas inferior -->
    <div class="tab-system">
        <div class="tab-nav">
            <button class="tab-button active" onclick="openTab('tab1')">Eventos na Rota</button>
            <button class="tab-button" onclick="openTab('tab2')">Restrições de Tráfego</button>
            <button class="tab-button" onclick="openTab('tab3')">Relatório da Rota</button>
        </div>
        
        <!-- Conteúdo da aba 1: Eventos -->
        <div id="tab1" class="tab-content active">
            <h5 style="color: #333; margin-bottom: 15px; font-weight: 600; border-left: 3px solid #ffc107; padding-left: 10px;">
                Eventos nas cidades da rota:
            </h5>
            <div style="width: 100%; min-height: 300px; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.04); padding: 15px;">
                <div id="events-list">
                    <p class="text-muted">Nenhum evento encontrado. Adicione locais e otimize a rota para ver eventos nas cidades do percurso.</p>
                </div>
            </div>
        </div>
        
        <!-- Conteúdo da aba 2: Restrições -->
        <div id="tab2" class="tab-content">
            <h5 style="color: #333; margin-bottom: 15px; font-weight: 600; border-left: 3px solid #ffc107; padding-left: 10px;">
                Restrições para caminhões do percurso:
            </h5>
            <p class="small text-muted mb-3">Filtrando para: caminhão de 1 eixo, 2 eixos, truck, comercial e toco</p>
            <div style="width: 100%; min-height: 300px; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.04); padding: 15px;">
                <div id="restrictions-list">
                    <p class="text-muted">Nenhuma restrição encontrada. Adicione locais e otimize a rota para ver restrições nas cidades do percurso.</p>
                </div>
            </div>
        </div>
        
        <!-- Conteúdo da aba 3: Relatório -->
        <div id="tab3" class="tab-content">
            <h5 style="color: #333; margin-bottom: 15px; font-weight: 600; border-left: 3px solid #ffc107; padding-left: 10px;">
                Relatório da rota otimizada:
            </h5>
            <div id="route-summary" class="mb-4" style="width: 100%; min-height: 300px; background-color: #fff8e1; border-radius: 8px; border: 1px solid #ffe082; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.03);">
                <p class="text-muted">Otimize uma rota para ver o relatório detalhado.</p>
            </div>
            
            <!-- Controles do Relatório -->
            <div class="form-group mt-4">
                <label>Nome da rota:</label>
                <input type="text" id="report-route-name" placeholder="Ex: Entrega Região Sul" 
                       class="form-control" style="border: 1px solid #ffe082; border-radius: 8px; padding: 10px 12px;">
            </div>
            <div class="d-flex justify-content-between mt-4">
                <button id="save-report-btn" class="btn btn-primary" style="background: linear-gradient(135deg, #ff9800, #ff5722); border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    Salvar Relatório
                </button>
                <button id="share-route-btn" class="btn btn-outline-secondary" style="border: 1px solid #ddd; background: white; padding: 10px 20px; border-radius: 8px; font-weight: 600;">
                    Compartilhar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Script de gerenciamento de abas -->
    <script>
        function openTab(tabId) {
            // Esconder todos os conteúdos
            var contents = document.getElementsByClassName("tab-content");
            for (var i = 0; i < contents.length; i++) {
                contents[i].classList.remove("active");
            }
            
            // Remover classe ativa de todos os botões
            var buttons = document.getElementsByClassName("tab-button");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("active");
            }
            
            // Mostrar o conteúdo selecionado
            document.getElementById(tabId).classList.add("active");
            
            // Marcar o botão clicado como ativo
            event.currentTarget.classList.add("active");
        }
    </script>
</body>
</html>