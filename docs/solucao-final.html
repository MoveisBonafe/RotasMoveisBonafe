<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solu√ß√£o Final - M√≥veis Bonaf√©</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      padding: 20px;
      max-width: 900px;
      margin: 0 auto;
    }
    h1, h2 {
      color: #333;
      border-bottom: 2px solid #ffd966;
      padding-bottom: 10px;
    }
    pre {
      background-color: #f5f5f5;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
    }
    code {
      font-family: Consolas, Monaco, 'Andale Mono', monospace;
      font-size: 14px;
    }
    .important {
      background-color: #fff9e6;
      border-left: 4px solid #ffd966;
      padding: 15px;
      margin: 20px 0;
    }
    .code-section {
      margin: 20px 0;
    }
    .steps {
      background-color: #f8f9fa;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    }
    .steps ol {
      margin-top: 0;
    }
  </style>
</head>
<body>
  <h1>Solu√ß√£o Final para Rotas Alternativas</h1>
  
  <div class="important">
    <strong>Objetivo:</strong> Ocultar informa√ß√µes de dist√¢ncia e tempo das rotas alternativas e mostrar essas informa√ß√µes em um painel elegante ao lado do bot√£o Visualizar.
  </div>
  
  <h2>1. Script Minimalista</h2>
  
  <div class="steps">
    <p>Instru√ß√µes para implementa√ß√£o:</p>
    <ol>
      <li>Copie o c√≥digo abaixo</li>
      <li>Crie um arquivo chamado <code>solucao-minima.js</code> no GitHub</li>
      <li>Cole o c√≥digo no arquivo</li>
      <li>Referencie o script no HTML com <code>&lt;script src="solucao-minima.js"&gt;&lt;/script&gt;</code></li>
    </ol>
  </div>
  
  <div class="code-section">
    <pre><code>/**
 * SOLU√á√ÉO M√çNIMA PARA GITHUB PAGES
 * 
 * Esta √© uma vers√£o ultra simplificada que:
 * 1. Oculta as informa√ß√µes de dist√¢ncia e tempo nas rotas alternativas
 * 2. Cria um painel simples para mostrar essas informa√ß√µes
 */
(function() {
  console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] Iniciando...");
  
  // Executar quando a p√°gina carrega
  window.addEventListener('load', iniciar);
  
  // Tamb√©m tentar imediatamente
  setTimeout(iniciar, 200);
  
  // E em intervalos
  [500, 1000, 2000, 3000, 5000].forEach(tempo => {
    setTimeout(iniciar, tempo);
  });
  
  function iniciar() {
    console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] Aplicando ajustes...");
    
    // 1. Injetar CSS principal
    injetarCSS();
    
    // 2. Ocultar informa√ß√µes nas rotas alternativas
    ocultarInformacoesRotas();
    
    // 3. Adicionar painel
    adicionarPainelDeInformacoes();
  }
  
  function injetarCSS() {
    // Evitar duplica√ß√£o
    if (document.getElementById('css-solucao-minima')) {
      return;
    }
    
    const estilo = document.createElement('style');
    estilo.id = 'css-solucao-minima';
    estilo.innerHTML = `
      /* Ocultar elementos de dist√¢ncia e tempo nas rotas alternativas */
      .route-alternative .route-distance,
      .route-alternative .route-time,
      .alternative .route-distance,
      .alternative .route-time,
      div.mb-2 .route-distance,
      div.mb-2 .route-time,
      .route-info .route-distance,
      .route-info .route-time {
        display: none !important;
        visibility: hidden !important;
      }
      
      /* Estilo para o novo painel */
      .info-painel {
        display: inline-flex;
        margin-left: 15px;
        padding: 6px 10px;
        background-color: #fff9e6;
        border: 1px solid #ffd966;
        border-radius: 4px;
        font-size: 14px;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      }
      
      .info-painel-item {
        margin-right: 15px;
      }
      
      .info-painel-item:last-child {
        margin-right: 0;
      }
      
      /* Amarelo M√≥veis Bonaf√© */
      #visualize-button, 
      button.btn-primary,
      button.btn-secondary {
        background-color: #ffd966 !important;
        border-color: #e6c259 !important;
        color: #212529 !important;
      }
    `;
    
    document.head.appendChild(estilo);
    console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] CSS adicionado");
  }
  
  function ocultarInformacoesRotas() {
    // Encontrar todas as rotas alternativas
    const seletores = [
      '.route-alternative',
      '.alternative',
      '.routes-container div.card',
      '.routes-container div.mb-2',
      '.route-alternative-box div'
    ];
    
    let rotasEncontradas = 0;
    
    for (const seletor of seletores) {
      const elementos = document.querySelectorAll(seletor);
      if (elementos.length > 0) {
        rotasEncontradas += elementos.length;
        elementos.forEach(el => {
          // Ocultar elementos de tempo e dist√¢ncia
          const distancia = el.querySelector('.route-distance, .distance, [class*="distance"]');
          const tempo = el.querySelector('.route-time, .time, [class*="time"]');
          
          if (distancia) distancia.style.display = 'none';
          if (tempo) tempo.style.display = 'none';
          
          // Ou ocultar via propriedade de visibilidade direta
          el.querySelectorAll('*').forEach(child => {
            const texto = child.textContent || '';
            if ((texto.includes('km') || texto.includes('min')) && child.children.length === 0) {
              child.style.display = 'none';
            }
          });
        });
      }
    }
    
    if (rotasEncontradas > 0) {
      console.log(`üõ†Ô∏è [Solu√ß√£o M√≠nima] ${rotasEncontradas} rotas alternativas encontradas e processadas`);
    } else {
      console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] Nenhuma rota alternativa encontrada");
    }
  }
  
  function adicionarPainelDeInformacoes() {
    // Evitar duplica√ß√£o
    if (document.querySelector('.info-painel')) {
      return;
    }
    
    // Encontrar o bot√£o Visualizar
    const botaoVisualizar = encontrarBotaoVisualizar();
    
    if (!botaoVisualizar) {
      console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] Bot√£o Visualizar n√£o encontrado");
      return;
    }
    
    // Criar o painel
    const painel = document.createElement('div');
    painel.className = 'info-painel';
    painel.innerHTML = `
      <div class="info-painel-item">
        <i class="fa fa-road" style="margin-right: 5px;"></i>
        <span class="info-distancia">- km</span>
      </div>
      <div class="info-painel-item">
        <i class="fa fa-clock" style="margin-right: 5px;"></i>
        <span class="info-tempo">- min</span>
      </div>
    `;
    
    // Adicionar o painel ap√≥s o bot√£o
    try {
      const parent = botaoVisualizar.parentNode;
      if (botaoVisualizar.nextSibling) {
        parent.insertBefore(painel, botaoVisualizar.nextSibling);
      } else {
        parent.appendChild(painel);
      }
      console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] Painel de informa√ß√µes adicionado");
      
      // Adicionar Font Awesome
      if (!document.querySelector('link[href*="font-awesome"]')) {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
        document.head.appendChild(link);
      }
      
      // Interceptar clique no bot√£o para pegar informa√ß√µes
      adicionarInterceptadorDeClique(botaoVisualizar);
    } catch (e) {
      console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] Erro ao adicionar painel:", e);
    }
  }
  
  function encontrarBotaoVisualizar() {
    // Estrat√©gia 1: Por ID
    let botao = document.getElementById('visualize-button');
    if (botao) return botao;
    
    // Estrat√©gia 2: Por classe e texto
    const botoesClasse = document.querySelectorAll('.btn, .btn-primary, .button');
    for (let i = 0; i < botoesClasse.length; i++) {
      if (botoesClasse[i].textContent.includes('Visualizar')) {
        return botoesClasse[i];
      }
    }
    
    // Estrat√©gia 3: Qualquer bot√£o com o texto
    const botoes = document.querySelectorAll('button');
    for (let i = 0; i < botoes.length; i++) {
      if (botoes[i].textContent.includes('Visualizar')) {
        return botoes[i];
      }
    }
    
    // Estrat√©gia 4: Qualquer elemento clic√°vel com o texto
    const elementos = document.querySelectorAll('a, div[onclick], span[onclick]');
    for (let i = 0; i < elementos.length; i++) {
      if (elementos[i].textContent.trim() === 'Visualizar') {
        return elementos[i];
      }
    }
    
    return null;
  }
  
  function adicionarInterceptadorDeClique(botao) {
    // Guardar o manipulador original
    const clickOriginal = botao.onclick;
    
    // Adicionar novo manipulador
    botao.addEventListener('click', function(e) {
      // Chamar o original se existir
      if (typeof clickOriginal === 'function') {
        try {
          clickOriginal.call(this, e);
        } catch (err) {
          console.log("üõ†Ô∏è [Solu√ß√£o M√≠nima] Erro ao chamar handler original:", err);
        }
      }
      
      // Aguardar um pouco para pegar as informa√ß√µes
      setTimeout(function() {
        atualizarInformacoesNoPainel();
      }, 500);
    });
  }
  
  function atualizarInformacoesNoPainel() {
    // Tentar encontrar informa√ß√µes de rota
    let distanciaTexto = '- km';
    let tempoTexto = '- min';
    
    // Estrat√©gia 1: Buscar em divs de rota selecionadas
    const rotaSelecionada = document.querySelector('.route-alternative.selected, .alternative.selected, .rota-selecionada');
    if (rotaSelecionada) {
      // Extrair texto
      const texto = rotaSelecionada.textContent || '';
      const matchDistancia = texto.match(/(\d+[.,]?\d*\s*km)/i);
      const matchTempo = texto.match(/(\d+\s*min|\d+\s*hora[s]?)/i);
      
      if (matchDistancia) distanciaTexto = matchDistancia[0];
      if (matchTempo) tempoTexto = matchTempo[0];
    }
    // Estrat√©gia 2: Buscar em elementos que t√™m estas informa√ß√µes
    else {
      // Dist√¢ncia
      const elementosDistancia = document.querySelectorAll('.route-distance, .distance');
      for (let i = 0; i < elementosDistancia.length; i++) {
        if (elementosDistancia[i].offsetParent !== null) { // Elemento vis√≠vel
          distanciaTexto = elementosDistancia[i].textContent.trim();
          break;
        }
      }
      
      // Tempo
      const elementosTempo = document.querySelectorAll('.route-time, .time');
      for (let i = 0; i < elementosTempo.length; i++) {
        if (elementosTempo[i].offsetParent !== null) { // Elemento vis√≠vel
          tempoTexto = elementosTempo[i].textContent.trim();
          break;
        }
      }
    }
    
    // Atualizar elementos
    const elDistancia = document.querySelector('.info-distancia');
    const elTempo = document.querySelector('.info-tempo');
    
    if (elDistancia) elDistancia.textContent = distanciaTexto;
    if (elTempo) elTempo.textContent = tempoTexto;
    
    console.log(`üõ†Ô∏è [Solu√ß√£o M√≠nima] Informa√ß√µes atualizadas: ${distanciaTexto}, ${tempoTexto}`);
  }
})();</code></pre>
  </div>
  
  <h2>2. Script para Preservar o Pegman</h2>
  
  <div class="steps">
    <p>Este script mant√©m o Pegman (Street View) vis√≠vel no mapa:</p>
    <ol>
      <li>Crie um arquivo chamado <code>fix-pegman.js</code> no GitHub</li>
      <li>Cole o c√≥digo abaixo</li>
      <li>Referencie o script no HTML com <code>&lt;script src="fix-pegman.js"&gt;&lt;/script&gt;</code></li>
    </ol>
  </div>
  
  <div class="code-section">
    <pre><code>/**
 * CORRE√á√ÉO DO PEGMAN (STREET VIEW)
 * 
 * Este script garante que o √≠cone do Pegman (Street View) seja mantido no mapa
 * enquanto remove outros controles desnecess√°rios.
 */
(function() {
  console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Inicializando ajustes para adicionar Pegman");
  
  // Vari√°veis para controle
  let tentativas = 0;
  const MAX_TENTATIVAS = 10;
  let ajustesAplicados = false;
  
  // Executar quando a p√°gina carrega
  window.addEventListener('load', iniciar);
  
  // Tamb√©m tentar imediatamente
  setTimeout(iniciar, 100);
  
  // E em intervalos
  const intervalos = [1000, 2000, 3000, 5000, 8000];
  intervalos.forEach(tempo => {
    setTimeout(iniciar, tempo);
  });
  
  // Fun√ß√£o principal
  function iniciar() {
    if (ajustesAplicados || tentativas >= MAX_TENTATIVAS) {
      return;
    }
    
    tentativas++;
    console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Tentando ajustar o mapa");
    
    // Verificar se o mapa do Google est√° carregado
    if (typeof google === 'undefined' || typeof google.maps === 'undefined') {
      console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] API do Google Maps ainda n√£o carregada");
      return;
    }
    
    // Tentar encontrar o objeto do mapa
    const mapElements = document.querySelectorAll('.gm-style');
    if (mapElements.length === 0) {
      console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Elementos do mapa n√£o encontrados");
      return;
    }
    
    console.log(`üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Encontrados ${mapElements.length} elementos do mapa, mas n√£o o objeto do mapa`);
    
    // Como n√£o temos acesso direto ao objeto do mapa, vamos usar uma abordagem alternativa
    // Adicionar CSS para garantir que o Pegman seja vis√≠vel e outros controles sejam escondidos
    adicionarCSS();
    
    // Tentar outras abordagens baseadas no DOM
    setTimeout(ajustarControlesMapa, 1000);
    
    ajustesAplicados = true;
  }
  
  // Adicionar CSS para controlar os elementos do mapa
  function adicionarCSS() {
    if (document.getElementById('css-pegman-fix')) {
      return;
    }
    
    const estilo = document.createElement('style');
    estilo.id = 'css-pegman-fix';
    estilo.textContent = `
      /* Manter o Pegman (Street View) */
      .gm-svpc {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
      
      /* Esconder bot√µes de edi√ß√£o e fullscreen */
      .gm-style-mtc,
      .gm-fullscreen-control {
        display: none !important;
      }
      
      /* Estilizar o bot√£o do Pegman para destac√°-lo */
      .gm-svpc {
        background-color: #fff !important;
        border-radius: 4px !important;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
        cursor: grab !important;
      }
      
      /* Deixar o mapa com controles m√≠nimos */
      .gmnoprint:not(.gm-bundled-control) {
        display: none !important;
      }
      
      /* Manter apenas os controles essenciais */
      .gm-bundled-control .gmnoprint {
        display: block !important;
      }
    `;
    
    document.head.appendChild(estilo);
    console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] CSS para o Pegman adicionado");
  }
  
  // Tentar ajustar os controles do mapa pelo DOM
  function ajustarControlesMapa() {
    // Verificar se o Pegman est√° vis√≠vel
    const pegman = document.querySelector('.gm-svpc');
    if (pegman) {
      console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Pegman encontrado e ajustado");
      
      // Garantir que seja vis√≠vel
      pegman.style.display = 'block';
      pegman.style.visibility = 'visible';
      pegman.style.opacity = '1';
      
      // Adicionar uma borda amarela suave para destacar
      pegman.style.borderColor = '#ffd966';
    } else {
      console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Pegman n√£o encontrado no DOM");
    }
    
    // Esconder bot√µes de fullscreen
    const fullscreenBtn = document.querySelector('.gm-fullscreen-control');
    if (fullscreenBtn) {
      fullscreenBtn.style.display = 'none';
      console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Bot√£o de tela cheia escondido");
    }
    
    // Aplicar cor amarela do M√≥veis Bonaf√© nos bot√µes
    const botoes = document.querySelectorAll('.gm-control-active');
    botoes.forEach(botao => {
      botao.style.backgroundColor = '#ffd966';
      botao.style.borderColor = '#e6c259';
    });
    
    console.log("üö∂‚Äç‚ôÇÔ∏è [PegmanFix] Ajustes nos controles do mapa aplicados");
  }
})();</code></pre>
  </div>
  
  <h2>3. Como Implementar</h2>
  
  <div class="steps">
    <p>Para implementar esta solu√ß√£o no GitHub Pages:</p>
    <ol>
      <li>Fa√ßa upload dos arquivos <code>solucao-minima.js</code> e <code>fix-pegman.js</code> para a raiz do reposit√≥rio</li>
      <li>Edite o arquivo <code>index.html</code> para incluir os scripts no final do body:</li>
    </ol>
  </div>
  
  <div class="code-section">
    <pre><code>&lt;!-- Script para adicionar o Pegman (Street View) ao mapa --&gt;
&lt;script src="fix-pegman.js"&gt;&lt;/script&gt;

&lt;!-- Solu√ß√£o m√≠nima para rotas alternativas --&gt;
&lt;script src="solucao-minima.js"&gt;&lt;/script&gt;</code></pre>
  </div>
  
  <div class="important">
    <p><strong>Importante:</strong> Esta solu√ß√£o foi otimizada para ser o mais simples e robusta poss√≠vel, minimizando conflitos com outros scripts j√° existentes no sistema.</p>
  </div>
  
  <h2>4. Resultado Esperado</h2>
  
  <ul>
    <li>As informa√ß√µes de dist√¢ncia e tempo ser√£o ocultadas nas rotas alternativas</li>
    <li>Um painel elegante aparecer√° ao lado do bot√£o Visualizar com estas informa√ß√µes</li>
    <li>O Pegman (Street View) permanecer√° vis√≠vel no mapa</li>
    <li>Os bot√µes ter√£o a cor amarela da identidade visual da M√≥veis Bonaf√©</li>
  </ul>
</body>
</html>