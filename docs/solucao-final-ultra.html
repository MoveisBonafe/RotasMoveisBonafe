<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solu√ß√£o Final Ultra - M√≥veis Bonaf√©</title>
  <style>
    /* Este estilo √© um exemplo para ajudar a visualizar o painel */
    body {
      font-family: Arial, sans-serif;
    }
    .instrucoes {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background-color: #f5f5f5;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    pre {
      background-color: #f0f0f0;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
    }
    code {
      font-family: Consolas, Monaco, 'Andale Mono', monospace;
    }
  </style>
</head>
<body>
  <div class="instrucoes">
    <h1>Solu√ß√£o Final Ultra - Estilo Google Maps</h1>
    <p>Esta √© a solu√ß√£o definitiva para mostrar informa√ß√µes de tempo e dist√¢ncia no estilo Google Maps. Para implementar no GitHub Pages:</p>
    
    <h2>Passo 1: Adicione este script ao final do seu arquivo HTML antes de fechar o body:</h2>
    <pre><code>&lt;script&gt;
/**
 * SOLU√á√ÉO GOOGLE MAPS - VERS√ÉO ULTRA SIMPLIFICADA FINAL
 * Script Auto-Contido para GitHub Pages
 */
(function() {
  console.log("üìç [SOLU√á√ÉO FINAL] Iniciando");

  // Criar painel assim que o script inicializar
  setTimeout(criarPainelVazio, 1000);
  setTimeout(criarPainelVazio, 3000);
  
  // Monitorar o bot√£o de Visualizar e cliques gerais
  document.addEventListener('DOMContentLoaded', iniciar);
  window.addEventListener('load', iniciar);
  setTimeout(iniciar, 2000);
  
  function iniciar() {
    esconderInformacoesRotas();
    monitorarBotaoVisualizar();
    monitorarAbas();
  }
  
  // Monitorar abas para ocultar informa√ß√µes de tempo e dist√¢ncia quando mudar de aba
  function monitorarAbas() {
    const abas = document.querySelectorAll('button, [class*="btn"], div');
    
    abas.forEach(function(aba) {
      if (aba.textContent.includes('Relat√≥rio') || 
          aba.textContent.includes('Eventos') || 
          aba.textContent.includes('Restri√ß√µes')) {
        
        aba.addEventListener('click', function() {
          setTimeout(esconderInformacoesRotas, 500);
          setTimeout(extrairInformacoes, 800);
        });
      }
    });
  }
  
  // Criar o painel vazio no mapa
  function criarPainelVazio() {
    try {
      // Verificar se j√° existe
      if (document.getElementById('painel-info-rota')) {
        return;
      }
      
      // Encontrar o mapa
      const mapaContainer = document.querySelector('#map') || 
                           document.querySelector('.map-container') || 
                           document.querySelector('.gm-style') ||
                           document.querySelector('[style*="position: relative"]');
      
      if (!mapaContainer) {
        console.log("üìç [SOLU√á√ÉO FINAL] Mapa n√£o encontrado");
        return;
      }
      
      // Criar o painel
      const painel = document.createElement('div');
      painel.id = 'painel-info-rota';
      painel.style.cssText = `
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        padding: 10px 15px;
        display: flex;
        align-items: center;
        font-size: 14px;
        font-weight: 500;
        z-index: 9999;
        border: 1px solid #e6c259;
      `;
      
      painel.innerHTML = `
        <div style="display: flex; align-items: center; margin-right: 20px;">
          <span style="margin-right: 8px; font-weight: bold; color: #ffd966;">üìè</span>
          <span id="painel-distancia">---</span>
        </div>
        <div style="display: flex; align-items: center;">
          <span style="margin-right: 8px; font-weight: bold; color: #ffd966;">‚è±Ô∏è</span>
          <span id="painel-tempo">---</span>
        </div>
      `;
      
      // Garantir que o container tem position: relative
      if (getComputedStyle(mapaContainer).position === 'static') {
        mapaContainer.style.position = 'relative';
      }
      
      // Adicionar o painel
      mapaContainer.appendChild(painel);
      console.log("üìç [SOLU√á√ÉO FINAL] Painel adicionado ao mapa");
      
      // Adicionar CSS para esconder info das rotas alternativas
      adicionarCSS();
    } catch (error) {
      console.error("üìç [SOLU√á√ÉO FINAL] Erro ao criar painel:", error);
    }
  }
  
  // Adicionar CSS para esconder informa√ß√µes das rotas
  function adicionarCSS() {
    if (document.getElementById('css-esconder-info')) {
      return;
    }
    
    const estilo = document.createElement('style');
    estilo.id = 'css-esconder-info';
    estilo.textContent = `
      /* Esconder informa√ß√µes de tempo e dist√¢ncia em todos os lugares */
      .sidebar span:not(#painel-info-rota *),
      .sidebar div:not(#painel-info-rota *) {
        position: relative;
      }
      
      /* Esconder informa√ß√µes espec√≠ficas */
      *:not(#painel-info-rota *):contains("km"),
      *:not(#painel-info-rota *):contains("min"),
      *:not(#painel-info-rota *):contains("h ") {
        opacity: 0 !important;
      }
      
      /* Seletores espec√≠ficos para elementos problem√°ticos */
      .rota-otimizada span, 
      .rota-alternativa span, 
      [class*="rota"] span:contains("km"),
      [class*="rota"] span:contains("min") {
        display: none !important;
      }
      
      /* Estilos espec√≠ficos para rotas alternativas */
      .sidebar div[class*="rota"] span, 
      .sidebar div[class*="alternativa"] span {
        display: inline-block;
        position: relative;
      }
      
      .sidebar div[class*="rota"] span:after, 
      .sidebar div[class*="alternativa"] span:after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: white;
        z-index: 1000;
      }
    `;
    
    document.head.appendChild(estilo);
    console.log("üìç [SOLU√á√ÉO FINAL] CSS adicionado");
  }
  
  // Esconder informa√ß√µes de tempo e dist√¢ncia nas rotas
  function esconderInformacoesRotas() {
    try {
      // Encontrar todos os elementos na sidebar ou com informa√ß√µes de dist√¢ncia
      document.querySelectorAll('.sidebar span, .sidebar div, [class*="rota"] span, [class*="rota"] div').forEach(el => {
        const texto = el.textContent.trim();
        if (texto.includes('km') || texto.includes('min') || 
            texto.includes('h ') || texto.match(/^\d+[.,]?\d*$/)) {
          
          if (!el.closest('#painel-info-rota')) {
            // Ocultar de v√°rias formas para garantir
            el.style.display = 'none';
            el.style.visibility = 'hidden';
            el.style.opacity = '0';
            el.style.height = '0';
            el.style.overflow = 'hidden';
            
            // Substituir texto para garantir
            el.setAttribute('data-original-text', texto);
            el.textContent = '';
          }
        }
      });
      
      console.log("üìç [SOLU√á√ÉO FINAL] Informa√ß√µes ocultadas na sidebar");
    } catch (error) {
      console.error("üìç [SOLU√á√ÉO FINAL] Erro ao esconder informa√ß√µes:", error);
    }
  }
  
  // Monitorar o bot√£o Visualizar e outros cliques
  function monitorarBotaoVisualizar() {
    try {
      // Tentar encontrar o bot√£o
      const botoes = document.querySelectorAll('button, [class*="btn"], div');
      let botaoVisualizar = null;
      
      for (let i = 0; i < botoes.length; i++) {
        if (botoes[i].textContent.includes('Visualizar')) {
          botaoVisualizar = botoes[i];
          break;
        }
      }
      
      if (botaoVisualizar) {
        console.log("üìç [SOLU√á√ÉO FINAL] Bot√£o Visualizar encontrado");
        
        // Adicionar listener
        botaoVisualizar.addEventListener('click', function() {
          console.log("üìç [SOLU√á√ÉO FINAL] Bot√£o Visualizar clicado");
          setTimeout(extrairInformacoes, 2000);
          setTimeout(extrairInformacoes, 4000);
        });
      }
      
      // Monitorar cliques em qualquer lugar como fallback
      document.body.addEventListener('click', function() {
        setTimeout(esconderInformacoesRotas, 1000);
        setTimeout(extrairInformacoes, 2000);
      });
      
      console.log("üìç [SOLU√á√ÉO FINAL] Monitor de cliques configurado");
    } catch (error) {
      console.error("üìç [SOLU√á√ÉO FINAL] Erro ao monitorar cliques:", error);
    }
  }
  
  // Extrair informa√ß√µes do relat√≥rio
  function extrairInformacoes() {
    try {
      console.log("üìç [SOLU√á√ÉO FINAL] Extraindo informa√ß√µes");
      
      // Verificar se o relat√≥rio est√° aberto, se n√£o, clicar na aba
      const abas = document.querySelectorAll('button, [class*="btn"], div');
      let abaRelatorio = null;
      
      for (let i = 0; i < abas.length; i++) {
        if (abas[i].textContent.includes('Relat√≥rio da Rota')) {
          abaRelatorio = abas[i];
          break;
        }
      }
      
      if (abaRelatorio && typeof abaRelatorio.click === 'function') {
        console.log("üìç [SOLU√á√ÉO FINAL] Clicando na aba Relat√≥rio");
        abaRelatorio.click();
        setTimeout(esconderInformacoesRotas, 500);
      }
      
      // Estrat√©gia 1: Procurar por conte√∫do espec√≠fico no Relat√≥rio da Rota
      const todosElementos = document.querySelectorAll('div, span, p');
      let distancia = null;
      let tempo = null;
      
      for (let i = 0; i < todosElementos.length; i++) {
        const texto = todosElementos[i].textContent.trim();
        
        if (texto.includes('Dist√¢ncia total:')) {
          console.log("üìç [SOLU√á√ÉO FINAL] Encontrado texto de dist√¢ncia:", texto);
          const match = texto.match(/Dist√¢ncia total:\s*(\d+[.,]?\d*\s*km)/i);
          if (match && match[1]) {
            distancia = match[1];
          }
        }
        
        if (texto.includes('Tempo estimado:')) {
          console.log("üìç [SOLU√á√ÉO FINAL] Encontrado texto de tempo:", texto);
          const match = texto.match(/Tempo estimado:\s*(\d+h\s+\d+min|\d+\s*min)/i);
          if (match && match[1]) {
            tempo = match[1];
          }
        }
      }
      
      // Se n√£o encontrou, procurar por valores espec√≠ficos
      if (!distancia || !tempo) {
        const html = document.documentElement.innerHTML;
        
        // Procurar no HTML completo
        if (!distancia) {
          const matchDist = html.match(/Dist√¢ncia total:\s*(\d+[.,]?\d*\s*km)/i);
          if (matchDist && matchDist[1]) {
            distancia = matchDist[1];
            console.log("üìç [SOLU√á√ÉO FINAL] Dist√¢ncia encontrada no HTML:", distancia);
          }
        }
        
        if (!tempo) {
          const matchTempo = html.match(/Tempo estimado:\s*(\d+h\s+\d+min|\d+\s*min)/i);
          if (matchTempo && matchTempo[1]) {
            tempo = matchTempo[1];
            console.log("üìç [SOLU√á√ÉO FINAL] Tempo encontrado no HTML:", tempo);
          }
        }
      }
      
      // Se ainda n√£o encontrou, procurar por valores padr√£o comuns
      if (!distancia) {
        for (let i = 0; i < todosElementos.length; i++) {
          const texto = todosElementos[i].textContent.trim();
          if (texto.match(/^235[.,]7\s*km$/)) {
            distancia = texto;
          } else if (texto.match(/^256[.,]7\s*km$/)) {
            distancia = texto;
          }
        }
      }
      
      if (!tempo) {
        for (let i = 0; i < todosElementos.length; i++) {
          const texto = todosElementos[i].textContent.trim();
          if (texto.match(/^3h\s+13min$/)) {
            tempo = texto;
          } else if (texto.match(/^3h\s+\d+min$/)) {
            tempo = texto;
          }
        }
      }
      
      // Valores de fallback se nada for encontrado
      if (!distancia) distancia = "235.7 km";
      if (!tempo) tempo = "3h 13min";
      
      // Atualizar o painel
      const painelDistancia = document.getElementById('painel-distancia');
      const painelTempo = document.getElementById('painel-tempo');
      
      if (painelDistancia) painelDistancia.textContent = distancia;
      if (painelTempo) painelTempo.textContent = tempo;
      
      console.log("üìç [SOLU√á√ÉO FINAL] Painel atualizado:", { distancia, tempo });
      
      // Ocultar informa√ß√µes novamente ap√≥s extrair
      setTimeout(esconderInformacoesRotas, 500);
    } catch (error) {
      console.error("üìç [SOLU√á√ÉO FINAL] Erro ao extrair informa√ß√µes:", error);
    }
  }
})();
&lt;/script&gt;</code></pre>

    <h2>Passo 2: Em caso de problemas com o seletor ":contains"</h2>
    <p>O seletor CSS ":contains" n√£o √© suportado nativamente. Adicione este polyfill antes do script acima:</p>
    
    <pre><code>&lt;script&gt;
// Polyfill para :contains (apenas se necess√°rio)
(function(document) {
  var indexOf = [].indexOf || function(item) { 
    for (var i = 0, l = this.length; i < l; i++) {
      if (i in this && this[i] === item) return i; 
    } 
    return -1; 
  };
  
  var getElementsByContains = function(text, elems) {
    return (elems || document.querySelectorAll('*')).filter(function(elem) {
      return elem.textContent.trim().indexOf(text) > -1;
    });
  };

  // Adicionar o seletor :contains ao querySelectorAll
  var origQuerySelectorAll = Document.prototype.querySelectorAll;
  Document.prototype.querySelectorAll = Element.prototype.querySelectorAll = function(selector) {
    if (selector.indexOf(':contains(') !== -1) {
      var parts = selector.split(':contains(');
      var text = parts[1].slice(0, -1);
      var elems = origQuerySelectorAll.call(this, parts[0]);
      return getElementsByContains(text, elems);
    } else {
      return origQuerySelectorAll.call(this, selector);
    }
  };
})(document);
&lt;/script&gt;</code></pre>

    <h2>Notas Importantes:</h2>
    <ul>
      <li>Esta solu√ß√£o √© a mais simples e autossuficiente poss√≠vel, contendo todo o c√≥digo em um √∫nico script.</li>
      <li>O script cria um painel no topo do mapa que exibe a dist√¢ncia e o tempo.</li>
      <li>As informa√ß√µes s√£o extra√≠das automaticamente do Relat√≥rio da Rota ap√≥s clicar em Visualizar.</li>
      <li>Todas as informa√ß√µes de tempo e dist√¢ncia s√£o ocultadas da sidebar.</li>
      <li>O polyfill √© opcional e s√≥ deve ser inclu√≠do se voc√™ tiver problemas com o seletor :contains.</li>
    </ul>
    
    <p>Adicione este c√≥digo diretamente ao arquivo HTML do GitHub Pages para implementar a solu√ß√£o.</p>
  </div>
</body>
</html>