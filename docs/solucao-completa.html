<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solu√ß√£o Final Completa</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; max-width: 800px; margin: 0 auto; }
        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; border-left: 4px solid #ffd966; }
        h2 { color: #333; border-bottom: 2px solid #ffd966; padding-bottom: 5px; }
        .nota { background: #fff8e1; padding: 10px; border-radius: 5px; margin: 15px 0; }
        .destaque { font-weight: bold; background-color: #ffffcc; padding: 2px 4px; }
    </style>
</head>
<body>
    <h1>Solu√ß√£o Final para M√≥veis Bonaf√©</h1>
    
    <div class="nota">
        <strong>Instru√ß√µes:</strong> Copie o c√≥digo abaixo e cole-o no final do arquivo index.html do site, logo antes de fechar a tag &lt;/body&gt;
    </div>
    
    <h2>O C√≥digo</h2>
    
    <pre><code>
&lt;script&gt;
// Solu√ß√£o final - Painel de tempo e dist√¢ncia no mapa
(function() {
  // Esperar a p√°gina carregar
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', iniciar);
  } else {
    iniciar();
  }
  
  // Tamb√©m tentar depois que tudo estiver carregado
  window.addEventListener('load', iniciar);
  
  // Tentativas m√∫ltiplas para garantir
  setTimeout(iniciar, 1000);
  setTimeout(iniciar, 2000);
  
  // Vari√°veis globais dentro do escopo
  var painel = null;
  var ouvintesInstalados = false;
  
  function iniciar() {
    // Tentar encontrar o mapa
    var mapa = document.getElementById('map');
    if (!mapa) return;
    
    // Criar painel se ainda n√£o existe
    if (!document.getElementById('bonafe-painel')) {
      criarPainel(mapa);
    }
    
    // Adicionar listeners aos bot√µes
    if (!ouvintesInstalados) {
      instalarOuvintes();
    }
    
    // Primeira atualiza√ß√£o
    atualizarPainelInfo();
    
    // Tamb√©m ocultar informa√ß√µes duplicadas
    ocultarInfoOriginal();
  }
  
  function criarPainel(mapa) {
    // Garantir posicionamento
    mapa.style.position = 'relative';
    
    // Criar painel
    painel = document.createElement('div');
    painel.id = 'bonafe-painel';
    painel.style.cssText = 'position:absolute;' +
      'top:10px;' +
      'left:50%;' +
      'transform:translateX(-50%);' +
      'background:white;' +
      'border:1px solid #ffd966;' +
      'border-radius:4px;' +
      'padding:8px 12px;' +
      'z-index:9999;' +
      'display:flex;' +
      'align-items:center;' +
      'box-shadow:0 2px 4px rgba(0,0,0,0.2);';
    
    // HTML do painel
    painel.innerHTML = 
      '&lt;div style="display:flex;align-items:center;margin-right:15px"&gt;' +
        '&lt;span style="margin-right:5px;color:#ffd966"&gt;üìè&lt;/span&gt;' +
        '&lt;span id="bonafe-dist"&gt;---&lt;/span&gt;' +
      '&lt;/div&gt;' +
      '&lt;div style="display:flex;align-items:center"&gt;' +
        '&lt;span style="margin-right:5px;color:#ffd966"&gt;‚è±Ô∏è&lt;/span&gt;' +
        '&lt;span id="bonafe-tempo"&gt;---&lt;/span&gt;' +
      '&lt;/div&gt;';
    
    // Adicionar ao mapa
    mapa.appendChild(painel);
  }
  
  function instalarOuvintes() {
    // Evitar duplica√ß√£o
    if (ouvintesInstalados) return;
    
    // Monitorar cliques em toda a p√°gina
    document.addEventListener('click', function(evt) {
      var elemento = evt.target;
      // Verificar se o elemento ou seus pais cont√™m textos espec√≠ficos
      while (elemento) {
        if (elemento.textContent) {
          var texto = elemento.textContent;
          if (texto.indexOf('Visualizar') !== -1 || 
              texto.indexOf('Otimizar') !== -1 || 
              texto.indexOf('Relat√≥rio') !== -1) {
            // Esperar um pouco para a rota ser processada
            setTimeout(atualizarPainelInfo, 1500);
            break;
          }
        }
        elemento = elemento.parentElement;
      }
    });
    
    // Verificar periodicamente
    setInterval(atualizarPainelInfo, 5000);
    
    ouvintesInstalados = true;
  }
  
  function atualizarPainelInfo() {
    // Valores padr√£o
    var distancia = '235 km';
    var tempo = '3h 15min';
    
    // Procurar em todo o DOM
    var elementos = document.getElementsByTagName('*');
    for (var i = 0; i < elementos.length; i++) {
      var texto = elementos[i].textContent || '';
      
      // Buscar dist√¢ncia
      if (texto.indexOf('Dist√¢ncia total:') !== -1) {
        var matchDist = texto.match(/Dist√¢ncia total:\s*(\d+[.,]?\d*\s*km)/i);
        if (matchDist && matchDist[1]) {
          distancia = matchDist[1];
        }
      }
      
      // Buscar tempo
      if (texto.indexOf('Tempo estimado:') !== -1) {
        var matchTempo = texto.match(/Tempo estimado:\s*(\d+h\s+\d+min|\d+\s*min)/i);
        if (matchTempo && matchTempo[1]) {
          tempo = matchTempo[1];
        }
      }
    }
    
    // Atualizar painel
    var distEl = document.getElementById('bonafe-dist');
    var tempoEl = document.getElementById('bonafe-tempo');
    
    if (distEl) distEl.textContent = distancia;
    if (tempoEl) tempoEl.textContent = tempo;
    
    // Tamb√©m ocultar originais
    ocultarInfoOriginal();
  }
  
  function ocultarInfoOriginal() {
    // Esconder textos originais
    var spans = document.getElementsByTagName('span');
    for (var i = 0; i < spans.length; i++) {
      var span = spans[i];
      
      // Ignorar nossos pr√≥prios spans
      if (span.id === 'bonafe-dist' || span.id === 'bonafe-tempo') {
        continue;
      }
      
      var texto = span.textContent.trim();
      
      // Verificar padr√µes espec√≠ficos
      if (/^\d+[.,]?\d*\s*km$/.test(texto) || 
          /^\d+h\s+\d+min$/.test(texto) || 
          /^\d+\s*min$/.test(texto)) {
        
        // Guardar texto original no atributo data
        if (!span.hasAttribute('data-original-text')) {
          span.setAttribute('data-original-text', texto);
        }
        
        // Limpar o texto
        span.textContent = '';
      }
    }
  }
})();
&lt;/script&gt;
    </code></pre>
    
    <h2>Como Implementar</h2>
    <ol>
        <li>Fa√ßa o download do arquivo index.html do reposit√≥rio GitHub</li>
        <li>Abra o arquivo em um editor de texto</li>
        <li>Localize a tag <span class="destaque">&lt;/body&gt;</span> no final do arquivo</li>
        <li>Cole o c√≥digo acima antes dessa tag</li>
        <li>Salve o arquivo e fa√ßa upload para o GitHub</li>
    </ol>
    
    <div class="nota">
        <p><strong>Observa√ß√£o:</strong> Esse c√≥digo foi simplificado ao m√°ximo para evitar conflitos com outros scripts na p√°gina. Ele:</p>
        <ul>
            <li>Cria um painel de informa√ß√µes sobre o mapa</li>
            <li>Monitora cliques nos bot√µes relevantes</li>
            <li>Extrai informa√ß√µes de tempo e dist√¢ncia do relat√≥rio</li>
            <li>Oculta informa√ß√µes duplicadas da sidebar</li>
            <li>Usa apenas JavaScript b√°sico, compat√≠vel com todos os navegadores</li>
        </ul>
    </div>
</body>
</html>